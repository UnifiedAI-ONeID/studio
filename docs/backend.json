
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "email": { "type": "string", "format": "email", "description": "The user's email address." },
        "displayName": { "type": "string", "description": "The user's display name." },
        "photoURL": { "type": "string", "format": "uri", "description": "URL of the user's profile picture." },
        "role": { "type": "string", "enum": ["user", "admin"], "description": "The user's role." },
        "interests": { "type": "array", "items": { "type": "string" } },
        "skills": { "type": "array", "items": { "type": "string" } },
        "locationPreferences": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["uid", "email"]
    },
    "Event": {
      "title": "Event",
      "description": "Represents an event in the system.",
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "startTime": { "type": "string", "format": "date-time" },
        "endTime": { "type": "string", "format": "date-time" },
        "timezone": { "type": "string" },
        "venueId": { "type": "string" },
        "hostId": { "type": "string" },
        "coverImageUrl": { "type": "string", "format": "uri" },
        "priceType": { "type": "string", "enum": ["free", "paid", "donation"] },
        "priceMin": { "type": "number" },
        "priceMax": { "type": "number" },
        "status": { "type": "string", "enum": ["draft", "published", "cancelled"] },
        "visibility": { "type": "string", "enum": ["public", "private"] },
        "approvalStatus": { "type": "string", "enum": ["pending", "approved", "rejected"] },
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "isFeaturedOnLanding": { "type": "boolean" },
        "priorityScore": { "type": "number" }
      },
      "required": ["title", "category", "startTime", "hostId", "status", "visibility", "approvalStatus", "createdBy", "createdAt", "updatedAt"]
    },
    "Venue": {
      "title": "Venue",
      "description": "Represents a physical location like a cafe, bar, or gallery.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "type": { "type": "string", "enum": ["cafe", "bar", "gallery", "ngo", "venue", "other"] },
        "description": { "type": "string" },
        "address": { "type": "string" },
        "neighborhood": { "type": "string" },
        "location": {
          "type": "object",
          "properties": {
            "latitude": { "type": "number" },
            "longitude": { "type": "number" }
          }
        },
        "openingHours": { "type": "string", "description": "A simple string describing opening hours, e.g., 'Mon-Fri: 9am-5pm'" },
        "priceLevel": { "type": "number", "description": "A number from 1 to 4 representing price level." },
        "tags": { "type": "array", "items": { "type": "string" } },
        "coverImageUrl": { "type": "string", "format": "uri" },
        "verified": { "type": "boolean" },
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "isFeaturedOnLanding": { "type": "boolean" }
      },
      "required": ["name", "type", "address", "neighborhood", "createdBy", "createdAt", "updatedAt", "verified"]
    },
    "Thread": {
      "title": "Thread",
      "description": "A discussion thread in the Commons.",
      "type": "object",
      "properties": {
        "title": { "type": "string", "description": "The title of the thread." },
        "body": { "type": "string", "description": "The initial content of the thread." },
        "topic": { "type": "string", "enum": ["general", "neighborhoods", "buy-sell", "housing", "clubs"] },
        "tags": { "type": "array", "items": { "type": "string" } },
        "relatedEventId": { "type": "string", "description": "Optional ID of a related event." },
        "relatedVenueId": { "type": "string", "description": "Optional ID of a related venue." },
        "createdBy": { "type": "string", "description": "The user ID of the creator." },
        "lastActivityAt": { "type": "string", "format": "date-time", "description": "Timestamp of the last activity (creation or new comment)." },
        "replyCount": { "type": "number", "description": "The number of replies." }
      },
      "required": ["title", "body", "topic", "createdBy", "lastActivityAt", "replyCount"]
    },
    "Comment": {
      "title": "Comment",
      "description": "A reply to a thread in the Commons.",
      "type": "object",
      "properties": {
        "threadId": { "type": "string", "description": "The ID of the parent thread." },
        "parentId": { "type": "string", "description": "Optional ID of the parent comment for nesting." },
        "body": { "type": "string", "description": "The content of the comment." },
        "createdBy": { "type": "string", "description": "The user ID of the commenter." }
      },
      "required": ["threadId", "body", "createdBy"]
    },
    "Report": {
      "title": "Report",
      "description": "A report submitted by a user for a thread or comment.",
      "type": "object",
      "properties": {
        "type": { "type": "string", "enum": ["thread", "comment"], "description": "The type of content being reported." },
        "targetId": { "type": "string", "description": "The ID of the reported thread or comment." },
        "reason": { "type": "string", "description": "The reason for the report." },
        "createdBy": { "type": "string", "description": "The user ID of the person who made the report." }
      },
      "required": ["type", "targetId", "reason", "createdBy"]
    }
  },
  "auth": {
    "providers": ["google.com", "password"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/backend/entities/UserProfile" },
      "description": "Stores public-facing user profile information."
    },
    "/events/{eventId}": {
      "schema": { "$ref": "#/backend/entities/Event" },
      "description": "Stores all event data."
    },
    "/venues/{venueId}": {
      "schema": { "$ref": "#/backend/entities/Venue" },
      "description": "Stores data for physical venues."
    },
    "/threads/{threadId}": {
      "schema": { "$ref": "#/backend/entities/Thread" },
      "description": "Stores discussion threads for the Commons."
    },
    "/threads/{threadId}/comments/{commentId}": {
      "schema": { "$ref": "#/backend/entities/Comment" },
      "description": "Stores comments for a specific thread."
    },
    "/reports/{reportId}": {
      "schema": { "$ref": "#/backend/entities/Report" },
      "description": "Stores user-submitted reports for moderation."
    }
  }
}
