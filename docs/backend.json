
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "email": { "type": "string", "format": "email", "description": "The user's email address." },
        "displayName": { "type": "string", "description": "The user's display name." },
        "photoURL": { "type": "string", "format": "uri", "description": "URL of the user's profile picture." },
        "role": { "type": "string", "enum": ["user", "admin"], "description": "The user's role." },
        "interests": { "type": "array", "items": { "type": "string" } },
        "skills": { "type": "array", "items": { "type": "string" } },
        "locationPreferences": { "type": "array", "items": { "type": "string" } },
        "homeCity": { "type": "string", "description": "The user's home city." }
      },
      "required": ["uid", "email"]
    },
    "Event": {
      "title": "Event",
      "description": "Represents an event in the system.",
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "startTime": { "type": "string", "format": "date-time" },
        "endTime": { "type": "string", "format": "date-time" },
        "timezone": { "type": "string" },
        "city": { "type": "string" },
        "location": {
            "type": "object",
            "properties": {
                "venueId": { "type": "string" },
                "address": { "type": "string" },
                "neighborhood": { "type": "string" }
            }
        },
        "hostId": { "type": "string" },
        "coverImageUrl": { "type": "string", "format": "uri" },
        "priceType": { "type": "string", "enum": ["free", "paid", "donation"] },
        "priceMin": { "type": "number" },
        "priceMax": { "type": "number" },
        "status": { "type": "string", "enum": ["draft", "published", "cancelled"] },
        "visibility": { "type": "string", "enum": ["public", "private"] },
        "approvalStatus": { "type": "string", "enum": ["pending", "approved", "rejected"] },
        "stats": {
          "type": "object",
          "properties": {
            "interestedCount": { "type": "number" },
            "goingCount": { "type": "number" },
            "savedCount": { "type": "number" },
            "viewCount": { "type": "number" }
          }
        },
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "isFeaturedOnLanding": { "type": "boolean" },
        "priorityScore": { "type": "number" }
      },
      "required": ["title", "category", "startTime", "hostId", "status", "visibility", "approvalStatus", "createdBy", "createdAt", "updatedAt"]
    },
    "Venue": {
      "title": "Venue",
      "description": "Represents a physical location like a cafe, bar, or gallery.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "categories": { "type": "array", "items": { "type": "string" }, "description": "A list of categories for the venue." },
        "description": { "type": "string" },
        "address": { "type": "string" },
        "neighborhood": { "type": "string" },
        "location": {
          "type": "object",
          "properties": {
            "latitude": { "type": "number" },
            "longitude": { "type": "number" }
          }
        },
        "openingHours": { "type": "string", "description": "A simple string describing opening hours, e.g., 'Mon-Fri: 9am-5pm'" },
        "priceLevel": { "type": "number", "description": "A number from 1 to 4 representing price level." },
        "tags": { "type": "array", "items": { "type": "string" } },
        "coverImageUrl": { "type": "string", "format": "uri" },
        "status": { "type": "string", "enum": ["pending_review", "approved"]},
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "isFeaturedOnLanding": { "type": "boolean" }
      },
      "required": ["name", "categories", "address", "neighborhood", "createdBy", "createdAt", "updatedAt", "status"]
    },
    "Thread": {
      "title": "Thread",
      "description": "A discussion thread in the Commons.",
      "type": "object",
      "properties": {
        "title": { "type": "string", "description": "The title of the thread." },
        "body": { "type": "string", "description": "The initial content of the thread." },
        "topic": { "type": "string", "enum": ["general", "neighborhoods", "buy-sell", "housing", "clubs", "events"] },
        "city": { "type": "string", "description": "The city where the thread is relevant." },
        "tags": { "type": "array", "items": { "type": "string" } },
        "relatedEventId": { "type": "string", "description": "Optional ID of a related event." },
        "relatedVenueId": { "type": "string", "description": "Optional ID of a related venue." },
        "authorId": { "type": "string", "description": "The user ID of the creator." },
        "lastActivityAt": { "type": "string", "format": "date-time", "description": "Timestamp of the last activity (creation or new comment)." },
        "replyCount": { "type": "number", "description": "The number of replies." },
        "likeCount": { "type": "number", "description": "The number of likes." }
      },
      "required": ["title", "body", "topic", "authorId", "lastActivityAt", "replyCount"]
    },
    "Comment": {
      "title": "Comment",
      "description": "A reply to a thread in the Commons.",
      "type": "object",
      "properties": {
        "threadId": { "type": "string", "description": "The ID of the parent thread." },
        "parentId": { "type": "string", "description": "Optional ID of the parent comment for nesting." },
        "body": { "type": "string", "description": "The content of the comment." },
        "createdBy": { "type": "string", "description": "The user ID of the commenter." },
        "likeCount": { "type": "number", "description": "The number of likes." }
      },
      "required": ["threadId", "body", "createdBy"]
    },
    "Report": {
      "title": "Report",
      "description": "A report submitted by a user for a thread or comment.",
      "type": "object",
      "properties": {
        "type": { "type": "string", "enum": ["thread", "comment"], "description": "The type of content being reported." },
        "targetId": { "type": "string", "description": "The ID of the reported thread or comment." },
        "reason": { "type": "string", "description": "The reason for the report." },
        "createdBy": { "type": "string", "description": "The user ID of the person who made the report." }
      },
      "required": ["type", "targetId", "reason", "createdBy"]
    },
    "Follow": {
        "title": "Follow",
        "description": "Represents a user following a specific target (e.g., venue, topic).",
        "type": "object",
        "properties": {
          "userId": { "type": "string", "description": "The ID of the user who is following." },
          "targetId": { "type": "string", "description": "The ID of the entity being followed." },
          "targetType": { "type": "string", "enum": ["venue", "topic", "organization", "user"], "description": "The type of entity being followed." },
          "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of when the follow action occurred." }
        },
        "required": ["userId", "targetId", "targetType", "createdAt"]
    },
    "Reaction": {
      "title": "Reaction",
      "description": "Represents a user's reaction (e.g., a 'like') to a piece of content.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The ID of the user who reacted." },
        "targetId": { "type": "string", "description": "The ID of the content being reacted to." },
        "targetType": { "type": "string", "enum": ["thread", "comment"], "description": "The type of content being reacted to." },
        "type": { "type": "string", "enum": ["like"], "description": "The type of reaction." },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "targetId", "targetType", "type", "createdAt"]
    },
    "EventInteraction": {
      "title": "Event Interaction",
      "description": "Represents a user's interaction with an event (e.g., going, interested, saved).",
      "type": "object",
      "properties": {
          "userId": { "type": "string" },
          "eventId": { "type": "string" },
          "type": { "type": "string", "enum": ["interested", "going", "saved"] },
          "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "eventId", "type", "createdAt"]
    }
  },
  "auth": {
    "providers": ["google.com", "password"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores public-facing user profile information."
    },
    "/users/{userId}/follows/{followId}": {
        "schema": { "$ref": "#/entities/Follow" },
        "description": "Stores a user's follow relationships."
    },
    "/events/{eventId}": {
      "schema": { "$ref": "#/entities/Event" },
      "description": "Stores all event data."
    },
    "/venues/{venueId}": {
      "schema": { "$ref": "#/entities/Venue" },
      "description": "Stores data for physical venues."
    },
    "/threads/{threadId}": {
      "schema": { "$ref": "#/entities/Thread" },
      "description": "Stores discussion threads for the Commons."
    },
    "/threads/{threadId}/comments/{commentId}": {
      "schema": { "$ref": "#/entities/Comment" },
      "description": "Stores comments for a specific thread."
    },
    "/threads/{threadId}/reactions/{reactionId}": {
      "schema": { "$ref": "#/entities/Reaction" },
      "description": "Stores reactions for a specific thread."
    },
    "/threads/{threadId}/comments/{commentId}/reactions/{reactionId}": {
      "schema": { "$ref": "#/entities/Reaction" },
      "description": "Stores reactions for a specific comment."
    },
    "/comments/{commentId}/reactions/{reactionId}": {
      "schema": { "$ref": "#/entities/Reaction" },
      "description": "Stores reactions for a specific comment."
    },
    "/reports/{reportId}": {
      "schema": { "$ref": "#/entities/Report" },
      "description": "Stores user-submitted reports for moderation."
    },
    "/eventInteractions/{interactionId}": {
      "schema": { "$ref": "#/entities/EventInteraction" },
      "description": "Tracks user interactions with events."
    }
  }
}

    